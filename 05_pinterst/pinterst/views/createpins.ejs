<% include ./partials/header.ejs %>

    <link rel="stylesheet" href="/stylesheets/form.css">
    <div class="formbold-main-wrapper">
        <!-- Author: FormBold Team -->
        <!-- Learn More: https://formbold.com -->
        <div class="formbold-form-wrapper">
            <form action="/createpost" method="post" enctype="multipart/form-data">
                <div class="form-divide">
                    <div class="mb-6 pt-4 form-left">
                        <label style="margin-bottom: 0;" class="formbold-form-label formbold-form-label-2">
                            Create New Post
                        </label>

                        <div class="formbold-mb-5 formbold-file-input">
                            <input type="file" name="postimage" id="file" />
                            <label for="file" id="backimg">
                                <div>
                                    <span class="formbold-drop-file"> Drop files here </span>
                                    <span class="formbold-or"> Or </span>
                                    <span class="formbold-browse"> Browse </span>
                                    <p id="fileName" style="color: white;"></p>
                                    <span class="cross-icon" id="remove-img"><i class="ri-close-fill"></i></span>
                                </div>
                            </label>
                        </div>
                    </div>
                    <div class="form-right">
                        <div class="formbold-mb-5">
                            <label for="title" class="formbold-form-label">
                                Send Title to this Image:
                            </label>
                            <input type="text" name="title" id="title" placeholder="Enter your Title"
                                class="formbold-form-input" />
                        </div>
                        <div class="formbold-mb-5">
                            <label for="description" class="formbold-form-label">
                                Send Description to this Image:
                            </label>
                            <textarea class="formbold-form-input " rows="8" name="description" id="description"
                                placeholder="Enter your Description"></textarea>
                        </div>
                    </div>

                </div>
                <div>
                    <button class="formbold-btn w-full">Create New Post</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        document.querySelector("#file").addEventListener("change", (event) => {


            const files = event.target.files;
            const fileName = files[0].name;
            document.querySelector("#fileName").innerHTML = fileName
            var oFReader = new FileReader();
            oFReader.readAsDataURL(files[0]);
            document.querySelector("#remove-img").style.display = "block"
            oFReader.onload = function (oFREvent) {
                document.getElementById("backimg").style.backgroundImage = `url(${oFREvent.target.result})`;
            };
            // Reset the flag for the next change event

        })
        document.querySelector("#remove-img").addEventListener("click", (event) => {
            // Clear the file input, reset background image, and hide the "Remove Image" button
            document.querySelector("#file").value = "";
            document.getElementById("backimg").style.backgroundImage = "none";
            document.querySelector("#remove-img").style.display = "none";
            event.stopImmediatePropagation()
            event.stopPropagation()
        });
    </script>
    <% include ./partials/footer.ejs %>